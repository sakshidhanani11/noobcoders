<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coastal Threat Alert System</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #0077B6;
            --secondary: #00B4D8;
            --accent: #FF9E00;
            --danger: #E63946;
            --warning: #FCA311;
            --success: #2A9D8F;
            --dark: #1D3557;
            --light: #F1FAEE;
            --gradient: linear-gradient(135deg, var(--primary), var(--secondary));
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%);
            color: #1D3557;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: var(--gradient);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0, 119, 182, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 2.5rem;
        }
        
        .logo h1 {
            font-size: 2rem;
            font-weight: 700;
        }
        
        .status-bar {
            display: flex;
            gap: 20px;
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 10px;
        }
        
        .status-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .status-value {
            font-weight: 600;
            font-size: 1.2rem;
        }
        
        .status-label {
            font-size: 0.8rem;
            opacity: 0.9;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--dark);
        }
        
        .card-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 8px 15px;
            border-radius: 8px;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: #005b8a;
        }
        
        .btn-outline {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }
        
        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }
        
        .map-container {
            height: 400px;
            border-radius: 12px;
            overflow: hidden;
        }
        
        #map {
            height: 100%;
            width: 100%;
        }
        
        .chart-container {
            height: 300px;
            position: relative;
        }
        
        .alerts-container {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .alert {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: flex-start;
            gap: 15px;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .alert-icon {
            font-size: 1.5rem;
            padding: 10px;
            border-radius: 50%;
            background: rgba(230, 57, 70, 0.2);
            color: var(--danger);
        }
        
        .alert-info {
            flex: 1;
        }
        
        .alert-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .alert-desc {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 8px;
        }
        
        .alert-time {
            font-size: 0.8rem;
            opacity: 0.6;
        }
        
        .alert-high {
            background: rgba(230, 57, 70, 0.1);
            border-left: 4px solid var(--danger);
        }
        
        .alert-medium {
            background: rgba(252, 163, 17, 0.1);
            border-left: 4px solid var(--warning);
        }
        
        .alert-low {
            background: rgba(42, 157, 143, 0.1);
            border-left: 4px solid var(--success);
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 25px;
        }
        
        .control-group {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }
        
        .control-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--dark);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .select-control {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-family: 'Poppins', sans-serif;
            background: white;
        }
        
        .input-control {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-family: 'Poppins', sans-serif;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
        }
        
        .stat-info {
            flex: 1;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            line-height: 1;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.7;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            color: var(--dark);
            opacity: 0.7;
            font-size: 0.9rem;
        }
        
        @media (max-width: 1024px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            
            .status-bar {
                width: 100%;
                justify-content: space-around;
            }
            
            .stats {
                grid-template-columns: 1fr;
            }
        }
        
        /* Animation for critical alerts */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        
        .critical {
            animation: pulse 2s infinite;
            box-shadow: 0 0 15px rgba(230, 57, 70, 0.5);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-water"></i>
                <div>
                    <h1>Coastal Threat Alert System</h1>
                    <p>Protecting coastal communities and blue carbon habitats</p>
                </div>
            </div>
            <div class="status-bar">
                <div class="status-item">
                    <div class="status-value" id="system-status">Operational</div>
                    <div class="status-label">System Status</div>
                </div>
                <div class="status-item">
                    <div class="status-value" id="active-alerts">3</div>
                    <div class="status-label">Active Alerts</div>
                </div>
                <div class="status-item">
                    <div class="status-value" id="sensors-online">24/25</div>
                    <div class="status-label">Sensors Online</div>
                </div>
            </div>
        </header>
        
        <div class="stats">
            <div class="stat-card">
                <div class="stat-icon" style="background: rgba(0, 119, 182, 0.1); color: var(--primary);">
                    <i class="fas fa-wind"></i>
                </div>
                <div class="stat-info">
                    <div class="stat-value" id="wind-speed">28 km/h</div>
                    <div class="stat-label">Wind Speed</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" style="background: rgba(42, 157, 143, 0.1); color: var(--success);">
                    <i class="fas fa-water"></i>
                </div>
                <div class="stat-info">
                    <div class="stat-value" id="sea-level">1.4 m</div>
                    <div class="stat-label">Sea Level</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" style="background: rgba(252, 163, 17, 0.1); color: var(--warning);">
                    <i class="fas fa-industry"></i>
                </div>
                <div class="stat-info">
                    <div class="stat-value" id="pollution">42</div>
                    <div class="stat-label">Pollution Index</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" style="background: rgba(230, 57, 70, 0.1); color: var(--danger);">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="stat-info">
                    <div class="stat-value" id="risk-level">Medium</div>
                    <div class="stat-label">Risk Level</div>
                </div>
            </div>
        </div>
        
        <div class="dashboard">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Coastal Monitoring Map</h2>
                    <div class="card-actions">
                        <button class="btn btn-outline" id="refresh-map">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                </div>
                <div class="map-container">
                    <div id="map"></div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Active Alerts</h2>
                    <div class="card-actions">
                        <button class="btn btn-primary" id="test-alert">
                            <i class="fas fa-bell"></i> Test Alert
                        </button>
                    </div>
                </div>
                <div class="alerts-container" id="alerts-container">
                    <!-- Alerts will be populated here by JavaScript -->
                </div>
            </div>
        </div>
        
        <div class="dashboard">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Sensor Data Trends</h2>
                    <div class="card-actions">
                        <select class="select-control" id="chart-type">
                            <option value="all">All Data</option>
                            <option value="sea">Sea Level</option>
                            <option value="wind">Wind Speed</option>
                            <option value="pollution">Pollution</option>
                        </select>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="data-chart"></canvas>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Notification History</h2>
                    <div class="card-actions">
                        <button class="btn btn-outline" id="clear-history">
                            <i class="fas fa-trash"></i> Clear
                        </button>
                    </div>
                </div>
                <div class="alerts-container" id="notification-history">
                    <!-- Notification history will be populated here -->
                </div>
            </div>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <h3 class="control-title">Alert Preferences</h3>
                <div class="form-group">
                    <label class="form-label">Alert Types:</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="alert-storm" checked>
                            <label for="alert-storm">Storm Surges</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="alert-erosion" checked>
                            <label for="alert-erosion">Coastal Erosion</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="alert-pollution" checked>
                            <label for="alert-pollution">Pollution</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="alert-illegal" checked>
                            <label for="alert-illegal">Illegal Activities</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Notification Methods:</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="notify-web" checked>
                            <label for="notify-web">Web Dashboard</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="notify-email" checked>
                            <label for="notify-email">Email</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="notify-sms">
                            <label for="notify-sms">SMS</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="notify-push">
                            <label for="notify-push">Push Notification</label>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-primary" id="save-preferences">
                    <i class="fas fa-save"></i> Save Preferences
                </button>
            </div>
            
            <div class="control-group">
                <h3 class="control-title">Contact Information</h3>
                <div class="form-group">
                    <label for="user-email" class="form-label">Email Address</label>
                    <input type="email" id="user-email" class="input-control" placeholder="your.email@example.com">
                </div>
                
                <div class="form-group">
                    <label for="user-phone" class="form-label">Phone Number (SMS)</label>
                    <input type="tel" id="user-phone" class="input-control" placeholder="+1234567890">
                </div>
                
                <div class="form-group">
                    <label for="alert-frequency" class="form-label">Alert Frequency</label>
                    <select id="alert-frequency" class="select-control">
                        <option value="immediate">Immediate</option>
                        <option value="hourly" selected>Hourly Digest</option>
                        <option value="daily">Daily Digest</option>
                    </select>
                </div>
                
                <button class="btn btn-primary" id="save-contact">
                    <i class="fas fa-user-check"></i> Save Contact Info
                </button>
            </div>
        </div>
        
        <footer>
            <p>Coastal Threat Alert System Â© 2023 | Protecting coastal communities and blue carbon ecosystems</p>
            <p>For emergency response, contact: emergency@coastalalert.org | +1-800-COASTAL</p>
        </footer>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Initialize map
        const map = L.map('map').setView([29.76, -95.37], 10);
        
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: 'Â© OpenStreetMap contributors'
        }).addTo(map);
        
        // Add coastal area overlay
        const coastalArea = L.polygon([
            [29.85, -95.50], [29.70, -95.20], [29.50, -95.10], [29.40, -95.30], [29.60, -95.60]
        ], {
            color: '#0077B6',
            fillColor: '#00B4D8',
            fillOpacity: 0.2,
            weight: 2
        }).addTo(map);
        
        coastalArea.bindPopup('Protected Coastal Zone');
        
        // Add sensor markers
        const sensors = [
            { id: 1, name: "Tide Gauge Alpha", lat: 29.75, lon: -95.35, status: "online" },
            { id: 2, name: "Weather Station Bravo", lat: 29.80, lon: -95.40, status: "online" },
            { id: 3, name: "Water Quality Sensor Charlie", lat: 29.70, lon: -95.30, status: "online" },
            { id: 4, name: "Tide Gauge Delta", lat: 29.65, lon: -95.45, status: "offline" },
            { id: 5, name: "Surveillance Camera Echo", lat: 29.78, lon: -95.25, status: "online" }
        ];
        
        sensors.forEach(sensor => {
            const marker = L.marker([sensor.lat, sensor.lon]).addTo(map);
            const statusIcon = sensor.status === "online" ? "ðŸŸ¢" : "ðŸ”´";
            marker.bindPopup(`
                <b>${sensor.name}</b><br>
                Status: ${statusIcon} ${sensor.status.toUpperCase()}<br>
                Location: ${sensor.lat.toFixed(4)}, ${sensor.lon.toFixed(4)}
            `);
        });
        
        // Initialize data arrays for charts
        const timestamps = [];
        const seaLevelData = [];
        const windSpeedData = [];
        const pollutionData = [];
        
        // Generate initial data
        for (let i = 0; i < 24; i++) {
            const time = new Date();
            time.setHours(time.getHours() - (23 - i));
            timestamps.push(time.toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'}));
            
            seaLevelData.push((1.0 + Math.random() * 0.8).toFixed(2));
            windSpeedData.push((10 + Math.random() * 30).toFixed(1));
            pollutionData.push((20 + Math.random() * 60).toFixed(0));
        }
        
        // Initialize chart
        const ctx = document.getElementById('data-chart').getContext('2d');
        const dataChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: timestamps,
                datasets: [
                    {
                        label: 'Sea Level (m)',
                        data: seaLevelData,
                        borderColor: '#0077B6',
                        backgroundColor: 'rgba(0, 119, 182, 0.1)',
                        fill: true,
                        tension: 0.3
                    },
                    {
                        label: 'Wind Speed (km/h)',
                        data: windSpeedData,
                        borderColor: '#E63946',
                        backgroundColor: 'rgba(230, 57, 70, 0.1)',
                        fill: true,
                        tension: 0.3
                    },
                    {
                        label: 'Pollution Index',
                        data: pollutionData,
                        borderColor: '#FCA311',
                        backgroundColor: 'rgba(252, 163, 17, 0.1)',
                        fill: true,
                        tension: 0.3
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
        
        // Sample alerts data
        const alerts = [
            {
                id: 1,
                type: 'Storm Surge',
                level: 'high',
                title: 'Storm Surge Warning',
                description: 'Potential storm surge detected. Water levels rising rapidly.',
                time: '2 minutes ago',
                critical: true
            },
            {
                id: 2,
                type: 'Pollution',
                level: 'medium',
                title: 'Water Pollution Alert',
                description: 'Increased pollution levels detected near coastal area.',
                time: '15 minutes ago',
                critical: false
            },
            {
                id: 3,
                type: 'Illegal Activity',
                level: 'low',
                title: 'Suspicious Activity Detected',
                description: 'Possible illegal dumping detected by surveillance camera.',
                time: '45 minutes ago',
                critical: false
            }
        ];
        
        // Function to render alerts
        function renderAlerts() {
            const alertsContainer = document.getElementById('alerts-container');
            alertsContainer.innerHTML = '';
            
            alerts.forEach(alert => {
                const alertEl = document.createElement('div');
                alertEl.className = `alert alert-${alert.level} ${alert.critical ? 'critical' : ''}`;
                
                let icon = 'fa-exclamation-circle';
                if (alert.type === 'Storm Surge') icon = 'fa-poo-storm';
                if (alert.type === 'Pollution') icon = 'fa-industry';
                if (alert.type === 'Illegal Activity') icon = 'fa-ban';
                
                alertEl.innerHTML = `
                    <div class="alert-icon">
                        <i class="fas ${icon}"></i>
                    </div>
                    <div class="alert-info">
                        <div class="alert-title">${alert.title}</div>
                        <div class="alert-desc">${alert.description}</div>
                        <div class="alert-time">${alert.time}</div>
                    </div>
                `;
                
                alertsContainer.appendChild(alertEl);
            });
        }
        
        // Function to add notification to history
        function addToHistory(alert) {
            const historyContainer = document.getElementById('notification-history');
            const historyItem = document.createElement('div');
            historyItem.className = `alert alert-${alert.level}`;
            
            historyItem.innerHTML = `
                <div class="alert-info">
                    <div class="alert-title">${alert.title}</div>
                    <div class="alert-time">${new Date().toLocaleString()}</div>
                </div>
            `;
            
            historyContainer.appendChild(historyItem);
        }
        
        // Initialize
        renderAlerts();
        
        // Test alert button
        document.getElementById('test-alert').addEventListener('click', function() {
            const testAlert = {
                id: Date.now(),
                type: 'Test',
                level: 'medium',
                title: 'Test Alert',
                description: 'This is a test of the coastal alert system.',
                time: 'Just now',
                critical: false
            };
            
            alerts.unshift(testAlert);
            renderAlerts();
            addToHistory(testAlert);
            
            // Show browser notification if permitted
            if (Notification.permission === 'granted') {
                new Notification('Coastal Alert: Test Notification', {
                    body: 'This is a test of the coastal alert system.',
                    icon: 'https://cdn-icons-png.flaticon.com/512/564/564619.png'
                });
            }
            
            // Update active alerts count
            document.getElementById('active-alerts').textContent = alerts.length;
        });
        
        // Clear history button
        document.getElementById('clear-history').addEventListener('click', function() {
            document.getElementById('notification-history').innerHTML = '';
        });
        
        // Save preferences button
        document.getElementById('save-preferences').addEventListener('click', function() {
            alert('Preferences saved successfully!');
        });
        
        // Save contact button
        document.getElementById('save-contact').addEventListener('click', function() {
            alert('Contact information saved successfully!');
        });
        
        // Refresh map button
        document.getElementById('refresh-map').addEventListener('click', function() {
            alert('Map data refreshed!');
        });
        
        // Request notification permission
        if ('Notification' in window && Notification.permission === 'default') {
            Notification.requestPermission();
        }
        
        // Simulate real-time data updates
        setInterval(() => {
            // Update stats with random values
            document.getElementById('wind-speed').textContent = 
                (10 + Math.random() * 30).toFixed(0) + ' km/h';
            document.getElementById('sea-level').textContent = 
                (1.0 + Math.random() * 0.8).toFixed(1) + ' m';
            document.getElementById('pollution').textContent = 
                (20 + Math.random() * 60).toFixed(0);
            
            // Occasionally add a new alert (5% chance)
            if (Math.random() < 0.05) {
                const alertTypes = ['Storm Surge', 'Pollution', 'Illegal Activity', 'Coastal Erosion'];
                const levels = ['high', 'medium', 'low'];
                
                const newAlert = {
                    id: Date.now(),
                    type: alertTypes[Math.floor(Math.random() * alertTypes.length)],
                    level: levels[Math.floor(Math.random() * levels.length)],
                    title: 'New Threat Detected',
                    description: 'Automated system has detected a potential coastal threat.',
                    time: 'Just now',
                    critical: Math.random() < 0.3
                };
                
                alerts.unshift(newAlert);
                if (alerts.length > 5) alerts.pop();
                
                renderAlerts();
                addToHistory(newAlert);
                
                document.getElementById('active-alerts').textContent = alerts.length;
                
                // Show browser notification for high priority alerts
                if (newAlert.critical && Notification.permission === 'granted') {
                    new Notification(`Coastal Alert: ${newAlert.type}`, {
                        body: newAlert.description,
                        icon: 'https://cdn-icons-png.flaticon.com/512/564/564619.png'
                    });
                }
            }
        }, 5000);
        
        // Chart type selector
        document.getElementById('chart-type').addEventListener('change', function() {
            const type = this.value;
            
            dataChart.data.datasets.forEach(dataset => {
                dataset.hidden = type !== 'all' && !dataset.label.toLowerCase().includes(type);
            });
            
            dataChart.update();
        });
    </script>
</body>
</html>
